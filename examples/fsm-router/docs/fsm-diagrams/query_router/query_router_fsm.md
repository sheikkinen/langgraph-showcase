# State Machine

**Description:** 

**Generated from:** `router.yaml`
**Machine Name:** `query_router`
**Version:** `1.0.0`
**Job Type:** `unknown`

---

## Main State Machine Flow

```mermaid
stateDiagram-v2
    [*] --> waiting

    %% IDLE
    state IDLE {
        [*] --> waiting
        waiting --> [*] : new_query
    }

    %% PROCESSING
    state PROCESSING {
        [*] --> classifying
        classifying --> simple_response : simple
        classifying --> complex_response : complex
        classifying --> complex_response : code
        simple_response --> [*] : response_ready
        complex_response --> [*] : response_ready
        classifying --> [*] : failed
    }

    %% COMPLETION
    state COMPLETION {
        [*] --> completed
        [*] --> error
        error --> [*] : response_ready
    }

    %% Transitions
    IDLE --> PROCESSING : new_query
    PROCESSING --> IDLE : response_ready
    PROCESSING --> IDLE : response_ready
    PROCESSING --> COMPLETION : failed
    COMPLETION --> IDLE : response_ready

```

---

## Stop/Shutdown Flow

```mermaid
stateDiagram-v2
    %% Stop/Shutdown Flow
    completed : completed
    stopped --> [*]
    waiting --> completed : stop
    classifying --> completed : stop
    simple_response --> completed : stop
```

---

## States Overview

| State | Description | Key Actions |
|-------|-------------|-------------|
| `waiting` | Waiting | N/A |
| `classifying` | Classifying | log, yamlgraph |
| `simple_response` | Simple Response | log, yamlgraph |
| `complex_response` | Complex Response | log, yamlgraph |
| `completed` | Completed | log |
| `error` | Error | log, log |

---

## Events Overview

| Event | Type | Description |
|-------|------|-------------|
| `new_query` | Internal | New Query |
| `simple` | Internal | Simple |
| `complex` | Internal | Complex |
| `code` | Internal | Code |
| `response_ready` | Internal | Response Ready |
| `failed` | Internal | Failed |

---

## Configuration Summary

- **States:** 6
- **Events:** 6
- **Transitions:** 9
- **Initial State:** `waiting`

---

*Generated by yaml_to_fsm.py*