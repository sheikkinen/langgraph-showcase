# Tone Router Demo - YAML Graph Definition
# Routes responses based on detected message tone

version: "1.0"
name: tone-router-demo
description: Route responses based on detected message tone
prompts_relative: true
prompts_dir: prompts

defaults:
  provider: xai
  temperature: 0.7

nodes:
  classify:
    type: router
    prompt: classify_tone
    routes:
      positive: respond_positive
      negative: respond_negative
      neutral: respond_neutral
    default_route: respond_neutral
    variables:
      message: "{state.message}"
    state_key: classification

  respond_positive:
    type: llm
    prompt: respond_positive
    variables:
      message: "{state.message}"
    state_key: response

  respond_negative:
    type: llm
    prompt: respond_negative
    variables:
      message: "{state.message}"
    state_key: response

  respond_neutral:
    type: llm
    prompt: respond_neutral
    variables:
      message: "{state.message}"
    state_key: response

edges:
  - from: START
    to: classify

  - from: classify
    to: [respond_positive, respond_negative, respond_neutral]
    type: conditional

  - from: respond_positive
    to: END
  - from: respond_negative
    to: END
  - from: respond_neutral
    to: END
