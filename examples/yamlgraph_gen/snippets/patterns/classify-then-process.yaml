# Classify Then Process Pattern
# Router â†’ handlers (complete mini-graph)
#
# ASSEMBLY INSTRUCTIONS:
# - This is a single combined router node (type: router with prompt field)
# - Routes use dict format {key: target_node}, not list format
# - DO NOT split into separate classification + routing nodes
# - Edge to handlers uses list syntax: to: [handler1, handler2, handler3]
# - DO NOT split list edge into multiple individual edges

description: Classification followed by category-specific processing

nodes:
  classify:
    type: router
    prompt: classify
    routes:
      positive: handle_positive
      negative: handle_negative
      neutral: handle_neutral
    default_route: handle_neutral
    variables:
      input: "{state.input}"
    state_key: classification

  handle_positive:
    type: llm
    prompt: handle_positive
    variables:
      input: "{state.input}"
    state_key: result

  handle_negative:
    type: llm
    prompt: handle_negative
    variables:
      input: "{state.input}"
    state_key: result

  handle_neutral:
    type: llm
    prompt: handle_neutral
    variables:
      input: "{state.input}"
    state_key: result

edges:
  - from: START
    to: classify

  - from: classify
    to: [handle_positive, handle_negative, handle_neutral]
    type: conditional

  - from: handle_positive
    to: END
  - from: handle_negative
    to: END
  - from: handle_neutral
    to: END
